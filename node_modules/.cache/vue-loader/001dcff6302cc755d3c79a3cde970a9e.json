{"remainingRequest":"/home/stevepc/Desktop/spotify-clone/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/stevepc/Desktop/spotify-clone/src/components/SearchComponents/SearchForm.vue?vue&type=template&id=7403bdfd","dependencies":[{"path":"/home/stevepc/Desktop/spotify-clone/src/components/SearchComponents/SearchForm.vue","mtime":1625949428895},{"path":"/home/stevepc/Desktop/spotify-clone/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/stevepc/Desktop/spotify-clone/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/stevepc/Desktop/spotify-clone/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1624994109000},{"path":"/home/stevepc/Desktop/spotify-clone/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/stevepc/Desktop/spotify-clone/node_modules/vue-loader-v16/dist/index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGZvcm0gYWN0aW9uPSIjIiBAc3VibWl0LnByZXZlbnQ9ImdldE11c2ljKCkiPgogICAgPEFycm93TmF2aWdhdGlvbiAvPgogICAgPGlucHV0CiAgICAgIHR5cGU9InRleHQiCiAgICAgIHYtbW9kZWw9InF1ZXJ5IgogICAgICBwbGFjZWhvbGRlcj0iU2VhcmNoIGZvciBzb25ncywgYXJ0aXN0cywgZ2VucmUiCiAgICAvPgogIDwvZm9ybT4K"},{"version":3,"sources":["/home/stevepc/Desktop/spotify-clone/src/components/SearchComponents/SearchForm.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3C,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC;MACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAC/C,CAAC;EACH,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/home/stevepc/Desktop/spotify-clone/src/components/SearchComponents/SearchForm.vue","sourceRoot":"","sourcesContent":["<template>\n  <form action=\"#\" @submit.prevent=\"getMusic()\">\n    <ArrowNavigation />\n    <input\n      type=\"text\"\n      v-model=\"query\"\n      placeholder=\"Search for songs, artists, genre\"\n    />\n  </form>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport ArrowNavigation from \"../CrossComponents/ArrowNavigation.vue\";\n\nexport default {\n  components: { ArrowNavigation },\n  data() {\n    return {\n      query: \"\",\n      tracks: [],\n      artists: [],\n    };\n  },\n  mounted() {},\n  methods: {\n    getMusic() {\n      let query = encodeURI(this.query);\n\n      // GET TOKEN AT URL 'https://accounts.spotify.com/authorize?client_id=60ab2a632f3942debcf22cd7da0c3f81&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F&scope=user-read-private%20user-read-email&response_type=token&state=123'\n      let accessToken = localStorage.getItem(\"accessToken\");\n\n      const config = {\n        method: \"get\",\n        url: `https://api.spotify.com/v1/search?q=${query}&type=track%2Cartist&limit=1`,\n        headers: {\n          Authorization: \"Bearer \" + accessToken,\n        },\n      };\n\n      //let res = axios(config);\n      axios\n        .get(config.url, config)\n        .then((res) => {\n          console.log(res);\n          let allTracks = res.data.tracks.items\n\n            .filter((track) => track.type === \"track\")\n            .map((track) => this.extractTrackData(track));\n\n          this.$emit(\"addSearchedTracks\", allTracks);\n\n          let allArtists = res.data.artists.items\n\n            .filter((artist) => artist.type === \"artist\")\n            .map((artist) => this.extractArtistsData(artist));\n\n          this.$emit(\"addSearchedArtists\", allArtists);\n        })\n        // CHECK README IF UNAUTHORIZED\n        .catch(() => {\n          window.location.replace(\n            \"https://accounts.spotify.com/authorize?client_id=60ab2a632f3942debcf22cd7da0c3f81&redirect_uri=http%3A%2F%2Flocalhost%3A8080%2F&scope=user-read-private%20user-read-email&response_type=token&state=123\"\n          );\n        });\n    },\n    extractTrackData({\n      id,\n      artist,\n      uri: audioUri,\n      album,\n      name,\n      type,\n      popularity,\n    }) {\n      return { name, id, artist, audioUri, album, type, popularity };\n    },\n\n    extractArtistsData({ id, name, uri, images, type, popularity }) {\n      return { name, id, uri, images, type, popularity };\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\nform {\n  display: flex;\n  position: fixed;\n  flex-direction: row;\n  align-items: center;\n  padding-top: 0.5em;\n  margin-bottom: 3em;\n  width: 70%;\n  background-color: transparent;\n  z-index: 9999;\n\n  input {\n    background: #ffffff url(../../assets/svg/search-icon.svg) no-repeat 5% 45%;\n    padding: 1em;\n    padding-left: 4em;\n    margin-left: 1em;\n    border-radius: 9999px;\n    width: 30%;\n    border: none;\n    &:focus,\n    &:focus-within,\n    &:focus-visible {\n      appearance: none;\n      outline: none;\n      border: none;\n    }\n  }\n  a {\n    margin: 1em;\n    text-decoration: none;\n    color: #fff;\n  }\n}\n</style>\n"]}]}